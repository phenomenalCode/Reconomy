<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Check-In Page</title>
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/index.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    crossorigin="anonymous"
  />
</head>
<body>
  <header role="banner" class="header">
    <div class="logo">
      <img src="media/images/reconomy-logo.png" alt="Reconomy company logo" />
    </div>

    <div id="admin_login" class="admin-login" role="form" aria-label="Admin Login">
      <form id="admin_login_form">
        <label for="input_username" class="sr-only">Username</label>
        <input class="gray-input" id="input_username" type="text" name="username" placeholder="Username" required />

        <label for="input_password" class="sr-only">Password</label>
        <input class="gray-input" id="input_password" type="password" name="password" autocomplete="current-password" placeholder="Password" required />

        <button id="btn_admin_submit" type="submit" aria-label="Log in as admin">Login</button>
      </form>
    </div>
  </header>

  <main role="main" class="container">
    <h1>Deltagare Incheckning</h1>

    <section class="check-in" aria-label="Participant check-in form">
      <form id="check_in_form" action="/checkin" method="POST">
        <div id="div_id_number">
          <label for="id_number">ID nummer:</label>
          <input class="gray-input" type="text" id="id_number" name="id_number" aria-required="false" />
          <button id="btn_find" type="button" aria-label="Find participant by ID">Find</button>
        </div>

        <fieldset aria-labelledby="alphabet_label">
          <legend id="alphabet_label">Välj efternamns första bokstav:</legend>
          <table id="alphabet_table" role="presentation">
            <tr>
              <!-- Alphabet links -->
              ${'abcdefghijklmnopqrstuvwxyz'.split('').map(letter => `
                <td><a class="alphabet" href="#" data-letter="${letter}" role="button" aria-label="Filter by letter ${letter.toUpperCase()}">${letter}</a></td>
              `).join('')}
            </tr>
          </table>
        </fieldset>

        <div id="employee_select_container">
          <label for="participant">Välj ditt namn:</label>
          <select id="participant" name="participant_name" required aria-required="true" aria-label="Participant name selection"></select>
        </div>

        <fieldset class="status-option" aria-label="Log type selection">
          <legend>Välj status:</legend>

          <label for="log_event_in" id="log_event_in_container">
            <input id="log_event_in" type="radio" name="log_event_type" value="kom" required />
            Kom <i class="fas fa-walking" aria-hidden="true"></i>
          </label>

          <label for="log_event_out" id="log_event_out_container">
            <input id="log_event_out" type="radio" name="log_event_type" value="gick" />
            Gick <i class="fas fa-running" aria-hidden="true"></i>
          </label>
        </fieldset>

        <div id="comment_container">
          <label for="log_event_comment">Kommentar:</label>
          <input class="gray-input" type="text" id="log_event_comment" name="log_event_comment" placeholder="Note late arrival or early departure" />
        </div>

        <button type="submit" aria-label="Check in button">Check In</button>
      </form>
    </section>
  </main>

  <!-- Success Popup -->
  <div id="success_popup" class="popup-overlay" role="dialog" aria-modal="true" aria-labelledby="success_label" style="display: none;">
    <div class="popup-content">
      <h2>Success!</h2>
      <p id="success_label">Du har checkat</p>
      <button id="close_popup" aria-label="Close success message">OK</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.alphabet').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          document.querySelectorAll('.alphabet').forEach(a => a.classList.remove('active'));
          link.classList.add('active');
          const letter = link.dataset.letter;
          // Custom event or logic here
        });
      });
    });
  </script>

  <script>
    window.env = {
      BASE_URL: "http://localhost:8081"
    };
  </script>

  <script type="module" src="src/index.js"></script>
</body>
</html>
